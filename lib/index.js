"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var React=_interopDefault(require("react"));function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}var routers={},listenEvents={};function Router(t){var e=t.className,n=t.style,r=t.children;return React.createElement("div",{className:e,style:n},r)}function callListen(t){if(listenEvents&&listenEvents.all&&0<listenEvents.all.length)for(var e=listenEvents.all,n=0;n<e.length;n++)e[n](t);if(listenEvents&&listenEvents.path&&0<listenEvents.path.length)for(var r=listenEvents.path,o=0;o<r.length;o++)t===r[o].path&&r[o].callback()}Router.defaultProps={className:"",style:{},children:[]};var Route=function(){function n(t){var e;return _classCallCheck(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,t))).state={renderItem:[]},e}return _inherits(n,React.Component),_createClass(n,[{key:"componentDidMount",value:function(){var t=this;this.initRouter(),window.addEventListener("load",function(){return t.changeReturn()}),window.addEventListener("hashchange",function(){return t.changeReturn()})}},{key:"initRouter",value:function(){var t=this.props,e=t.path,n=t.component;if(routers[e])throw new Error("router error:".concat(e," has existed"));routers[e]=n}},{key:"changeReturn",value:function(){var t,e=window.location.hash.split("?")[0],n=this.props.path;e===n&&routers[e]?(t="function"==typeof routers[e]?routers[e]():routers[e],this.setState({renderItem:t},function(){return callListen(e)})):this.setState({renderItem:[]})}},{key:"render",value:function(){var t=this.state.renderItem;return React.createElement(React.Fragment,null,t)}}]),n}();function dispatchRouter(t){var e=t.path,n=void 0===e?"":e,r=t.query,o=void 0===r?{}:r,s=[];for(var i in o)s.push("".concat(i,"=").concat(o[i]));window.location.href="".concat(n,"?").concat(s.join("&"))}function listenPath(t,e){listenEvents.path||(listenEvents.path=[]),listenEvents.path.push({path:t,callback:e})}function listenAll(t){listenEvents.all||(listenEvents.all=[]),listenEvents.all.push(t)}exports.Route=Route,exports.Router=Router,exports.dispatchRouter=dispatchRouter,exports.listenAll=listenAll,exports.listenPath=listenPath;
